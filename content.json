{"meta":{"title":"Mindops","subtitle":null,"description":null,"author":"Mindops","url":"http://www.mindops.com"},"pages":[],"posts":[{"title":"CentOS7安装frp与开机启动","slug":"CentOS7安装frp与开机启动","date":"2019-02-09T03:48:45.000Z","updated":"2019-02-09T03:49:06.439Z","comments":true,"path":"2019/02/09/CentOS7安装frp与开机启动/","link":"","permalink":"http://www.mindops.com/2019/02/09/CentOS7安装frp与开机启动/","excerpt":"","text":"1. 下载frp程序文件1https://github.com/fatedier/frp/releases如图，我这里选择linux-amd64版本的。2. 解压文件下载后解压到自己的目录，我这里解压到/usr/local/frp:3. 添加systemd配置文件：1vim /usr/lib/systemd/system/frp.service文件内容如下：12345678910111213141516[Unit]Description=The nginx HTTP and reverse proxy serverAfter=network.target remote-fs.target nss-lookup.target[Service]Type=simpleExecStart=/usr/local/frp/frps -c /usr/local/frp/frps.iniKillSignal=SIGQUITTimeoutStopSec=5KillMode=processPrivateTmp=trueStandardOutput=syslogStandardError=inherit[Install]WantedBy=multi-user.targetExecStart的内容请根据自己frp安装目录修改。4. 设置开机启动12systemctl daemon-reloadsystemctl enable frp5. 启动 frp1systemctl start frp6. 查看frp是否启动1ps aux | grep frps显示如下内容表示启动成功","categories":[],"tags":[]},{"title":"Docker安装禅道（一）","slug":"Docker安装禅道（一）","date":"2019-02-09T03:48:03.000Z","updated":"2019-02-11T06:43:54.231Z","comments":true,"path":"2019/02/09/Docker安装禅道（一）/","link":"","permalink":"http://www.mindops.com/2019/02/09/Docker安装禅道（一）/","excerpt":"","text":"1. 拉取PHP镜像1docker pull php:7.2-apache2. 下载禅道源代码这里以11.2版本为例：1wget http://dl.cnezsoft.com/zentao/11.2/ZenTaoPMS.11.2.stable.zip3. 解压源代码1unzip ZenTaoPMS.11.2.stable.zip4. 移动源代码码到指定目录1mv zentaopms/ /usr/local/zentaopms/5. 启动镜像1docker run -d -p 8080:80 --name zentaopms -v /usr/local/zentaopms/:/zentaopms php:7.2-apache6. 安装mysql模块123docker exec -it zentaopms /bin/shdocker-php-ext-install pdo_mysqlexit7. 修改php.ini和000-default.conf配置文件因为镜像中没有编辑器，所以将配置文件复制到宿主机，修改完成后再移动回去12docker cp zentaopms:/usr/local/etc/php/php.ini-production ./php.inivim php.iniphp.ini文件主要修改两处:1234# 修改时区date.timezone = Asia/Shanghai# 修改Session目录session.save_path = &quot;/tmp&quot;修改完成后将文件移动到容器内：1docker cp ./php.ini zentaopms:/usr/local/etc/php/php.iniApache配置文件：12docker cp zentaopms:/etc/apache2/sites-available/000-default.conf ./000-default.confvim 000-default.conf修改 DocumentRoot /var/www/html 为 DocumentRoot /zentaopms/www修改完成将文件复制到容器内：1docker cp ./000-default.conf zentaopms:/etc/apache2/sites-available/000-default.conf8. 重启镜像1docker restart zentaopms此种方式因为修改了容器内容，启动新的镜像时需要重新配置，不够优雅，比较优雅的方式是直接基于php:7.2-apache构建新的镜像，即在Dockerfile里修改相关内容，此方法后面介绍。","categories":[],"tags":[]}]}